# セクション3: 関数とモジュール性 - 宿題

## 理論問題

1. **関数とは何ですか？Pythonでの関数の主な利点を3つ挙げてください。**

2. **以下の関数定義の問題点を指摘し、修正してください。**
   ```python
   def calculate_fish_price(weight price_per_kg):
       total_price = weight * price_per_kg
       return total_price
   ```

3. **ローカルスコープとグローバルスコープの違いを説明し、それぞれの例を示してください。**

4. **以下のコードの出力を予測してください。**
   ```python
   def modify_fish_list(fishes):
       fishes.append("タイ")
       fishes = ["新しいリスト"]
       return fishes

   fish_list = ["マグロ", "サケ"]
   new_list = modify_fish_list(fish_list)
   print(fish_list)
   print(new_list)
   ```

5. **再帰関数とは何ですか？再帰関数を使用する際の注意点を説明してください。**

6. **以下の関数呼び出しが有効かどうかを判断し、無効な場合は理由を説明してください。**
   ```python
   def describe_fish(name, weight=0, length=0, habitat="不明"):
       return f"{name}は重さ{weight}kg、長さ{length}cm、生息地は{habitat}です。"
   
   # 呼び出し1
   describe_fish("マグロ", habitat="太平洋", 80, 150)
   
   # 呼び出し2
   describe_fish(weight=5, "サケ", habitat="北海道")
   
   # 呼び出し3
   describe_fish("タイ", 3, habitat="瀬戸内海", length=40)
   ```

7. **モジュールとパッケージの違いを説明してください。**

8. **`from math import *` のようなインポート方法の問題点を説明してください。**

9. **デコレータとは何ですか？Pythonでデコレータを使用する利点を説明してください。**

10. **関数型プログラミングの主な特徴を3つ挙げ、それぞれについて簡単に説明してください。**

## 実践問題

### 問題1: 基本的な関数
魚の名前と体重（kg）を受け取り、その魚が「軽量魚」（5kg未満）、「中量魚」（5kg以上20kg未満）、「重量魚」（20kg以上）のどれに分類されるかを返す関数 `classify_fish` を作成してください。

```python
# ここにコードを書いてください
```

### 問題2: デフォルト引数と引数の検証
魚の名前、価格、在庫数を受け取り、魚の情報を辞書として返す関数 `create_fish_entry` を作成してください。価格と在庫数にはデフォルト値を設定し、価格が負の値の場合はエラーメッセージを返すようにしてください。

```python
# ここにコードを書いてください
```

### 問題3: 可変長引数
任意の数の魚の名前を受け取り、それらをアルファベット順にソートして返す関数 `sort_fish_names` を作成してください。

```python
# ここにコードを書いてください
```

### 問題4: 再帰関数
正の整数 n を受け取り、フィボナッチ数列の第 n 項を計算する再帰関数 `fibonacci` を作成してください。ただし、効率化のためにメモ化を使用してください。

```python
# ここにコードを書いてください
```

### 問題5: ラムダ関数と高階関数
以下の魚のリストを使用して、指定された条件に基づいて魚をフィルタリングする関数 `filter_fish` を作成してください。この関数は、魚のリストとフィルタリング条件（ラムダ関数）を引数として受け取ります。

```python
fish_data = [
    {"name": "マグロ", "weight": 80, "length": 150, "habitat": "太平洋"},
    {"name": "サケ", "weight": 5, "length": 75, "habitat": "北海道"},
    {"name": "タイ", "weight": 3, "length": 40, "habitat": "瀬戸内海"},
    {"name": "ブリ", "weight": 7, "length": 90, "habitat": "日本海"},
    {"name": "フグ", "weight": 2, "length": 30, "habitat": "瀬戸内海"}
]

# ここにコードを書いてください
```

### 問題6: map, filter, reduce
上記の `fish_data` を使用して、以下の操作を行ってください：

1. `map` を使用して、各魚の名前と生息地を「{名前}（{生息地}）」という形式の文字列のリストに変換してください。
2. `filter` を使用して、重さが5kg以上の魚だけを抽出してください。
3. `reduce` を使用して、すべての魚の長さの平均を計算してください。

```python
# ここにコードを書いてください
```

### 問題7: デコレータ
関数の実行前と実行後にメッセージを表示するデコレータ `log_execution` を作成し、任意の関数に適用してください。

```python
# ここにコードを書いてください
```

### 問題8: モジュールの作成と使用
魚に関する以下の機能を持つモジュール `fish_utils.py` を作成してください：

1. 魚の重さから価格を計算する関数 `calculate_price`
2. 魚が大型（長さ100cm以上）かどうかを判定する関数 `is_big_fish`
3. 魚の情報を表示する関数 `display_fish_info`

次に、別のPythonファイル `use_fish_utils.py` を作成し、作成したモジュールをインポートして使用してください。

```python
# fish_utils.py
# ここにコードを書いてください

# use_fish_utils.py
# ここにコードを書いてください
```

### 問題9: 関数合成
2つの関数を合成する関数 `compose` を作成してください。この関数は、2つの関数 f と g を引数として受け取り、f(g(x)) を計算する新しい関数を返します。

```python
# ここにコードを書いてください
```

### 問題10: 総合問題 - 魚の在庫管理システム
以下の機能を持つ魚の在庫管理システムを作成してください：

1. 魚の追加、更新、削除
2. 在庫の表示（全体、カテゴリ別）
3. 魚の検索（名前、価格範囲、カテゴリなど）
4. 売上の記録と集計
5. 在庫が少ない魚のアラート

関数、モジュール性、高階関数、デコレータなど、このセクションで学んだ概念を活用してください。

```python
# ここにコードを書いてください
```

## 提出方法

1. すべての問題の解答を1つのPythonファイル（`section3_homework_solutions.py`）にまとめてください。
2. 理論問題の解答はコメントとして含めてください。
3. 各実践問題の解答の前に、問題番号と簡単な説明をコメントとして追加してください。
4. ファイルを提出する前に、すべてのコードが正しく動作することを確認してください。

## 評価基準

- 正確性: すべての問題が正しく解かれているか
- コードの品質: コードが読みやすく、効率的で、適切にコメントされているか
- 概念の理解: 関数とモジュール性の概念が適切に適用されているか
- 創造性: 特に総合問題での解決策の独創性と完成度

頑張ってください！
